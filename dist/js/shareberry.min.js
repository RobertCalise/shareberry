!function(){"use strict";var t="0.0.4",e=function(t){t=t||{};for(var e=1;e<arguments.length;e++)if(arguments[e])for(var i in arguments[e])arguments[e].hasOwnProperty(i)&&(t[i]=arguments[e][i]);return t},i=function(t){return this._extend=e,this.options={className:null,el:!1,collection:!1,popup:{width:640,height:300}},this.el=!1,this.type="text",this.share=!1,this.initialize(t)};i.prototype.initialize=function(t){return t&&"object"==typeof t&&(this.options=this._extend(this.options,t)),this.options.el&&this.options.collection?("img"===this.options.el.tagName.toLowerCase()&&(this.type="image"),this.collection=this.options.collection,this.render(),this):!1},i.prototype.addEventListeners=function(){return this.el?(this.share.addEventListener("click",this.actionShare.bind(this),!1),this):!1},i.prototype.render=function(){if(!this.options.el)return!1;this.el=document.createElement("div"),this.el.classList.add(this.options.className);var t=this.options.className+"-share__item",e=this.options.className+"-icon";this.share=document.createElement("div");var i="";this.share.classList.add(this.options.className+"-share"),this.collection.options.twitter&&(i+='<div class="'+t+" "+t+'--twitter" data-shareberry-social="twitter" data-shareberry-handle="'+this.collection.options.twitter+'"><i class="'+e+" "+e+'--twitter"></i></div>'),this.share.innerHTML=i,this.content=document.createElement("div"),this.content.classList.add(this.options.className+"-content");var s=this.options.el.tagName;return s&&(s=s.toLowerCase(),this.content.classList.add(this.options.className+"-content--"+s)),this.options.el.parentNode.insertBefore(this.el,this.options.el),this.el.appendChild(this.content),this.content.appendChild(this.options.el),this.el.insertBefore(this.share,this.el.firstChild),this.addEventListeners(),this},i.prototype.getClickTarget=function(t){var e=t.target;return e.classList.contains(this.options.className+"-share")?!1:(e.classList.contains(this.options.className+"-icon")&&(e=e.parentNode),e)},i.prototype.getText=function(t){var e=this.collection.options.text;return"text"===this.type&&(e=this.options.el.innerText),e.length+t.length>109&&(e=e.substring(0,109-t.length),e+="â€¦"),e=e?e:window.document.title,e=encodeURIComponent(e)},i.prototype.getUrl=function(){var t=this.collection.options.url;return t=t?t:window.location.href,t=encodeURIComponent(t)},i.prototype.getParams=function(t){t=t?t:!1;var e=this.getText(t),i=this.getUrl(),s=this.options.popup.width,n=this.options.popup.height,o=screen.width/2-s/2,r=screen.height/2-n,h={text:e,url:i,handle:t,window:{width:s,height:n,left:o,top:r}};return h},i.prototype.actionShare=function(t){var e=this.getClickTarget(t);if(!e)return!1;var i=e.getAttribute("data-shareberry-social"),s=e.getAttribute("data-shareberry-handle");this.renderPopup(i,s)},i.prototype.renderPopup=function(t,e){if(!t||!e||"string"!=typeof t||"string"!=typeof e)return!1;var i=this.getParams(e),s="";s+="width="+i.window.width+",",s+="height="+i.window.height+",",s+="left="+i.window.left+",",s+="top="+i.window.top;var n="https://twitter.com/intent/tweet?url="+i.url+"&text="+i.text+"&via="+i.handle;return window.open(n,"",s),this};var s=function(s){return this._extend=e,this.version=t,this.options={className:"hs-shareberry",el:!1,twitter:!1},this.ShareberryItem=i,this.els=[],this.shares=[],this.initialize(s)};return s.prototype.initialize=function(t){if(t&&"object"==typeof t&&(this.options=this._extend(this.options,t)),!this.options.el||"string"!=typeof this.options.el)return!1;var e=document.querySelectorAll(this.options.el);if(!e||!e.length)return!1;for(var i=0,s=e.length;s>i;i++){var n=new this.ShareberryItem({className:this.options.className,el:e[i],collection:this});this.shares.push(n)}return this},window.Shareberry=s,s}();